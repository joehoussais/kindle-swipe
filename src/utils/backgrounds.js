/**
 * Background images with text color configurations
 * Each image is classified by mood and optimal text colors
 */

export const BACKGROUNDS = [
  // Ancient bridges
  {
    id: 'bridge-1',
    src: '/backgrounds/joeyseph1219_Ancient_bridge_over_slow_river_ancient_stone_bri_3e9374fd-454a-46ef-9e95-010c0cc118ea_1.png',
    theme: 'light',
    mood: 'serene'
  },
  {
    id: 'bridge-2',
    src: '/backgrounds/joeyseph1219_Ancient_bridge_over_slow_river_ancient_stone_bri_3e9374fd-454a-46ef-9e95-010c0cc118ea_2.png',
    theme: 'light',
    mood: 'serene'
  },
  {
    id: 'bridge-3',
    src: '/backgrounds/joeyseph1219_Ancient_bridge_over_slow_river_ancient_stone_bri_3e9374fd-454a-46ef-9e95-010c0cc118ea_3.png',
    theme: 'light',
    mood: 'serene'
  },
  // Aqueduct
  {
    id: 'aqueduct',
    src: '/backgrounds/joeyseph1219_Aqueduct_over_rolling_fields_ancient_Roman_aqued_0462afe3-3628-4b99-aab3-f13f0f00fd8f_1.png',
    theme: 'light',
    mood: 'serene'
  },
  // Cliff monastery
  {
    id: 'cliff-monastery-1',
    src: '/backgrounds/joeyseph1219_Cliff_monastery_ruins_ocean_fog_ruined_cliffside_3fc41cc3-b797-4315-9029-df5dff270a76_1.png',
    theme: 'dark',
    mood: 'mystical'
  },
  {
    id: 'cliff-monastery-3',
    src: '/backgrounds/joeyseph1219_Cliff_monastery_ruins_ocean_fog_ruined_cliffside_3fc41cc3-b797-4315-9029-df5dff270a76_3.png',
    theme: 'dark',
    mood: 'mystical'
  },
  // Colosseum
  {
    id: 'colosseum-rain',
    src: '/backgrounds/joeyseph1219_Colosseum_in_rain_night_the_Colosseum_at_night_i_9f2993ea-101e-4a05-9330-d472b269e519_2.png',
    theme: 'dark',
    mood: 'epic'
  },
  // Desert pillars
  {
    id: 'desert-pillars',
    src: '/backgrounds/joeyseph1219_Desert_pillars_long_shadows_lonely_sandstone_pil_fd460316-51e3-4c34-bb85-eadf5d6518dc_1.png',
    theme: 'warm',
    mood: 'contemplative'
  },
  // Futuristic megacity
  {
    id: 'megacity-0',
    src: '/backgrounds/joeyseph1219_Futuristic_coastal_megacity_twilight_futuristic__ccec90b5-945d-4d33-aa0a-055977fd7308_0.png',
    theme: 'dark',
    mood: 'futuristic'
  },
  {
    id: 'megacity-1',
    src: '/backgrounds/joeyseph1219_Futuristic_coastal_megacity_twilight_futuristic__ccec90b5-945d-4d33-aa0a-055977fd7308_1.png',
    theme: 'dark',
    mood: 'futuristic'
  },
  {
    id: 'megacity-2',
    src: '/backgrounds/joeyseph1219_Futuristic_coastal_megacity_twilight_futuristic__ccec90b5-945d-4d33-aa0a-055977fd7308_2.png',
    theme: 'dark',
    mood: 'futuristic'
  },
  // Marble columns
  {
    id: 'marble-columns',
    src: '/backgrounds/joeyseph1219_Marble_columns_in_mist_classical_towering_marble_8021afa4-da27-4b22-b427-666402201232_0.png',
    theme: 'light',
    mood: 'classical'
  },
  // Brutalist building
  {
    id: 'brutalist',
    src: '/backgrounds/joeyseph1219_Monumental_brutalist_building_minimal_prestige_s_fd59d002-c0b3-418c-9f1c-f1f5e720f3c7_3.png',
    theme: 'neutral',
    mood: 'powerful'
  },
  // Overgrown amphitheater
  {
    id: 'amphitheater',
    src: '/backgrounds/joeyseph1219_Overgrown_amphitheater_nature_reclaiming_ancient_6dd184c4-754b-4485-94e5-42fbd6d73779_1.png',
    theme: 'light',
    mood: 'nostalgic'
  },
  // Ringed planet ruins
  {
    id: 'ringed-planet-1',
    src: '/backgrounds/joeyseph1219_Ringed_planet_over_desert_ruins_ancient_stone_ru_b93afa0b-1808-4eaf-a973-6d58c08e2bfa_1.png',
    theme: 'dark',
    mood: 'epic'
  },
  {
    id: 'ringed-planet-2',
    src: '/backgrounds/joeyseph1219_Ringed_planet_over_desert_ruins_ancient_stone_ru_b93afa0b-1808-4eaf-a973-6d58c08e2bfa_2.png',
    theme: 'dark',
    mood: 'epic'
  },
  // Roman forum
  {
    id: 'forum',
    src: '/backgrounds/joeyseph1219_Roman_forum_ruins_serene_daylight_Roman_forum_ru_c2040eb2-605d-4f0f-9d4a-86865d6608fd_3.png',
    theme: 'light',
    mood: 'classical'
  },
  // Starship wreck
  {
    id: 'starship-0',
    src: '/backgrounds/joeyseph1219_Starship_wreck_in_salt_flats_distant_starship_wr_fb268697-9095-4ce2-bf33-8ca1ca4cf63b_0.png',
    theme: 'light',
    mood: 'vast'
  },
  {
    id: 'starship-1',
    src: '/backgrounds/joeyseph1219_Starship_wreck_in_salt_flats_distant_starship_wr_fb268697-9095-4ce2-bf33-8ca1ca4cf63b_1.png',
    theme: 'light',
    mood: 'vast'
  },
  {
    id: 'starship-3',
    src: '/backgrounds/joeyseph1219_Starship_wreck_in_salt_flats_distant_starship_wr_fb268697-9095-4ce2-bf33-8ca1ca4cf63b_3.png',
    theme: 'light',
    mood: 'vast'
  },
  // Wheat fields
  {
    id: 'wheat-2',
    src: '/backgrounds/joeyseph1219_Wheat_field__cypress_sunset_calm_golden_wheat_fi_3765a0de-4caa-4a0a-a2fb-1aa4077e302a_2.png',
    theme: 'warm',
    mood: 'peaceful'
  },
  {
    id: 'wheat-3',
    src: '/backgrounds/joeyseph1219_Wheat_field__cypress_sunset_calm_golden_wheat_fi_3765a0de-4caa-4a0a-a2fb-1aa4077e302a_3.png',
    theme: 'warm',
    mood: 'peaceful'
  },
  // Rome dawn
  {
    id: 'rome-dawn',
    src: '/backgrounds/joeyseph1219_ancient_Rome_skyline_at_dawn_distant_domes_and_t_c95a8367-37e7-4a61-b8db-da1533dc77c6_1.png',
    theme: 'light',
    mood: 'nostalgic'
  },
  // Jungle temple
  {
    id: 'jungle-temple-0',
    src: '/backgrounds/joeyseph1219_jungle_temple_ruins_mysterious_but_not_horror_an_6762f94e-2e14-4304-a875-fde2aee0adf7_0.png',
    theme: 'dark',
    mood: 'mystical'
  },
  {
    id: 'jungle-temple-3',
    src: '/backgrounds/joeyseph1219_jungle_temple_ruins_mysterious_but_not_horror_an_6762f94e-2e14-4304-a875-fde2aee0adf7_3.png',
    theme: 'dark',
    mood: 'mystical'
  },
  // Mars dunes
  {
    id: 'mars-1',
    src: '/backgrounds/joeyseph1219_lonely_figure_on_wind-sculpted_Mars_dunes_faint__e95320d4-3f96-4aa7-accf-a07f9101a641_1.png',
    theme: 'warm',
    mood: 'contemplative'
  },
  {
    id: 'mars-3',
    src: '/backgrounds/joeyseph1219_lonely_figure_on_wind-sculpted_Mars_dunes_faint__e95320d4-3f96-4aa7-accf-a07f9101a641_3.png',
    theme: 'warm',
    mood: 'contemplative'
  },
  // Moon explorer
  {
    id: 'moon-1',
    src: '/backgrounds/joeyseph1219_solitary_explorer_on_a_moon_ridge_Earth_hanging__c739081b-49b1-4f94-8be3-7cb9ccce557e_1.png',
    theme: 'dark',
    mood: 'vast'
  },
  {
    id: 'moon-3',
    src: '/backgrounds/joeyseph1219_solitary_explorer_on_a_moon_ridge_Earth_hanging__c739081b-49b1-4f94-8be3-7cb9ccce557e_3.png',
    theme: 'dark',
    mood: 'vast'
  }
];

// Cache for consistent background per highlight
const highlightBackgroundCache = new Map();

/**
 * Get a random background for a highlight
 * Uses the highlight ID to ensure consistency
 */
export function getBackgroundForHighlight(highlightId) {
  if (highlightBackgroundCache.has(highlightId)) {
    return highlightBackgroundCache.get(highlightId);
  }

  // Use highlight ID to pick a deterministic but varied background
  let hash = 0;
  for (let i = 0; i < highlightId.length; i++) {
    const char = highlightId.charCodeAt(i);
    hash = ((hash << 5) - hash) + char;
    hash = hash & hash;
  }

  const index = Math.abs(hash) % BACKGROUNDS.length;
  const background = BACKGROUNDS[index];

  highlightBackgroundCache.set(highlightId, background);
  return background;
}

/**
 * Preload all background images
 */
export function preloadBackgrounds() {
  BACKGROUNDS.forEach(bg => {
    const img = new Image();
    img.src = bg.src;
  });
}

/**
 * Preload a specific background by highlight ID
 */
export function preloadBackgroundForHighlight(highlightId) {
  if (!highlightId) return;
  const background = getBackgroundForHighlight(highlightId);
  const img = new Image();
  img.src = background.src;
}

/**
 * Get RGB string for CSS
 */
export function rgbString(color, alpha = 1) {
  if (alpha < 1) {
    return `rgba(${color.r}, ${color.g}, ${color.b}, ${alpha})`;
  }
  return `rgb(${color.r}, ${color.g}, ${color.b})`;
}
